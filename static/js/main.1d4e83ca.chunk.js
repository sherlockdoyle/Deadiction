(this.webpackJsonpdeadiction=this.webpackJsonpdeadiction||[]).push([[0],{12:function(e,t,n){},20:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var c=n(1),i=n.n(c),a=n(13),s=n.n(a),o=n(9),r=n(3),l=n(2),d=(n(12),n.p+"static/media/github.62c49901.svg"),j=n(0);var b=function(e){return Object(j.jsxs)("div",{className:"main-win",children:[Object(j.jsxs)("div",{className:"title",children:[Object(j.jsx)("h1",{children:e.title}),Object(j.jsx)("button",{className:"github",title:"See source code!",onClick:function(){return open("https://github.com/sherlockdoyle/Deadiction","_blank")},children:Object(j.jsx)("img",{src:d,alt:"Github"})})]}),Object(j.jsx)("div",{className:"content",children:e.children})]})},u=n(8),h=n.p+"static/media/option.5fc64663.svg",m=n.p+"static/media/progress.b07568ed.svg",O=n.p+"static/media/delete.6d81ad0b.svg",x=["children"],v=["onClick","onViewProgress","onDelete","children"];function p(e){var t=e.children;Object(u.a)(e,x);return Object(j.jsx)("ul",{className:"list-view",children:t})}function f(e){var t=e.onClick,n=e.onViewProgress,i=e.onDelete,a=e.children,s=(Object(u.a)(e,v),Object(c.useState)(!1)),o=Object(r.a)(s,2),l=o[0],d=o[1],b=Object(c.useRef)();function x(e){var t;(null===(t=b.current)||void 0===t?void 0:t.contains(e.target))||(d(!1),document.removeEventListener("click",x))}return Object(j.jsxs)("li",{className:"list-item",children:[Object(j.jsx)("div",{className:"content",onClick:t,children:a}),Object(j.jsx)("button",{className:"menu-button",ref:b,title:"Menu",onClick:function(){d(!0),document.addEventListener("click",x)},children:Object(j.jsx)("img",{src:h,alt:"Menu"})}),l&&Object(j.jsxs)("div",{className:"menu",children:[Object(j.jsxs)("button",{onClick:n,children:[Object(j.jsx)("img",{src:m,alt:"\u22ef"}),"Progress"]}),Object(j.jsxs)("button",{onClick:i,children:[Object(j.jsx)("img",{src:O,alt:"Delete"}),"Delete"]})]})]})}var g=["closable","onClose","children"];var y=function(e){var t=e.closable,n=e.onClose,c=e.children;return Object(u.a)(e,g),Object(a.createPortal)(Object(j.jsx)("div",{className:"popup",onClick:function(){t&&n()},children:i.a.Children.map(c,(function(e){return i.a.isValidElement(e)?i.a.cloneElement(e,{onClose:n}):e}))}),document.getElementById("overlay"))},w=n.p+"static/media/cancel.3cad4f91.svg",k=["title","onClose","controls","noCloseButton","children"];var C=function(e){var t=e.title,n=e.onClose,c=e.controls,i=e.noCloseButton,a=e.children;return Object(u.a)(e,k),Object(j.jsxs)("div",{className:"dialog",children:[Object(j.jsxs)("div",{className:"header",children:[Object(j.jsx)("h3",{children:t}),i||Object(j.jsx)("button",{className:"close",onClick:n,children:Object(j.jsx)("img",{src:w,alt:"\u2717"})})]}),Object(j.jsx)("div",{className:"content",children:a}),Object(j.jsx)("div",{className:"control",children:Object.entries(c).map((function(e){var t=Object(r.a)(e,2),n=t[0],c=t[1];return Object(j.jsx)("button",{onClick:c,children:n})}))})]})},D=n(17),N="deadiction_data",I={HOUR:24,DAY:1,WEEK:1/7,MONTH:1/30},A=null,S={loadData:function(){if(null===A){var e=localStorage.getItem(N);A=null===e?this.initData():JSON.parse(e)}return this.updateData(A),A},initData:function(){return{firstTime:!0,version:"2",addictions:[]}},updateData:function(e){switch(e.version){case"0":var t,n=Object(D.a)(e.addictions);try{for(n.s();!(t=n.n()).done;){t.value.decrementFactor*=100/66}}catch(a){n.e(a)}finally{n.f()}case"1":var c,i=Object(D.a)(e.addictions);try{for(i.s();!(c=i.n()).done;){c.value.lastUsed=void 0}}catch(a){i.e(a)}finally{i.f()}}e.version="2",this.saveData()},saveData:function(){localStorage.setItem(N,JSON.stringify(A))},clearData:function(){localStorage.removeItem(N)},createAddiction:function(e,t,n){t*=I[n];var c=(new Date).getTime(),i={id:c,name:e,freq:t,acceptableRatio:1,decrementFactor:Math.min(1,1/t)/66,timesAsked:0,timesUsed:0,timesResisted:0,timesRelapsed:0,lastUsed:void 0};return this.loadData(),A.addictions.push(i),this.saveData(),c},getAddiction:function(e){return this.loadData(),A.addictions.find((function(t){return t.id===e}))},addictionIsAvailable:function(e){return this.loadData(),A.addictions.find((function(t){return t.name===e}))},removeAddiction:function(e){this.loadData();var t=A.addictions.findIndex((function(t){return t.id===e}));-1!==t&&A.addictions.splice(t,1),this.saveData()},clearAddictions:function(){this.loadData(),A.addictions.length=0,this.saveData()}},R=(n(20),n.p+"static/media/tick.e9615eeb.svg");var T=function(e){var t=Object(c.useState)(""),n=Object(r.a)(t,2),i=n[0],a=n[1],s=Object(l.i)(),o=s.path,d=s.url,b=Object(l.g)();return Object(j.jsx)("div",{id:"creator",children:Object(j.jsxs)(l.d,{children:[Object(j.jsx)(l.b,{path:"".concat(o,"/name"),children:Object(j.jsx)(M,{setName:a,onParentDone:e.onDone,history:b,url:d})}),Object(j.jsx)(l.b,{path:"".concat(o,"/freq"),children:0===i.length?Object(j.jsx)(l.a,{to:"".concat(d,"/name")}):Object(j.jsx)(E,{name:i,onParentDone:e.onDone})}),Object(j.jsx)(l.b,{path:o,children:Object(j.jsx)(l.a,{to:"".concat(d,"/name")})})]})})};function M(e){var t=S.loadData(),n=Object(c.useState)(""),a=Object(r.a)(n,2),s=a[0],o=a[1],d=i.a.createRef(),b=Object(c.useState)(!1),u=Object(r.a)(b,2),h=u[0],m=u[1],O=Object(c.useState)(""),x=Object(r.a)(O,2),v=x[0],p=x[1],f=Object(l.g)();function g(){var t=0===s.length?1:S.addictionIsAvailable(s.trim().toUpperCase())?2:0;t?(p(1===t?"Enter something!":"'".concat(s.trim().toUpperCase(),"' already exists!")),m(!0),d.current.focus(),setTimeout((function(){return m(!1)}),1e3)):(m(!1),e.setName(s.trim().toUpperCase()),f.push("".concat(e.url,"/freq")))}return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"content",children:Object(j.jsxs)("div",{id:"create-name",children:["I wish not to",Object(j.jsx)("br",{}),Object(j.jsx)("input",{ref:d,className:h?"err":"",placeholder:"verb",title:"Name of addiction",autoFocus:!0,value:s,onChange:function(e){return o(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&g()},style:{width:"100%"}})]})}),Object(j.jsxs)("div",{className:"control",children:[Object(j.jsx)("button",{className:"cancel",title:"Cancel",onClick:function(){0===t.addictions.length?(o(""),d.current.focus()):e.onParentDone()},children:Object(j.jsx)("img",{src:w,alt:"\u2717"})}),h?Object(j.jsx)("div",{className:"errorMessage",children:v}):null,Object(j.jsx)("button",{className:"done",title:"Done",onClick:g,children:Object(j.jsx)("img",{src:R,alt:"\u2713"})})]})]})}function U(e){var t=0;do{t+=1,e=~~(e/10)}while(e);return.55*t+.15+"em"}function E(e){var t,n=Object(c.useState)(1),i=Object(r.a)(n,2),a=i[0],s=i[1],o=Object(c.useState)(1),d=Object(r.a)(o,2),b=d[0],u=d[1],h=Object(c.useState)("DAY"),m=Object(r.a)(h,2),O=m[0],x=m[1],v=Object(l.g)();return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"content",children:Object(j.jsxs)("div",{id:"create-freq",children:["I ",e.name," ",Object(j.jsx)("input",{type:"number",min:"1",step:"1",value:a,onChange:function(e){return s(Math.max(1,Math.round(Number(e.target.value))))},style:{width:U(a)}})," time",1===a?"":"s"," every ",Object(j.jsx)("input",{type:"number",min:"1",step:"1",value:b,onChange:function(e){return u(Math.max(1,Math.round(Number(e.target.value))))},style:{width:U(b)}})," ",Object(j.jsxs)("nobr",{children:[Object(j.jsxs)("select",{value:O,onChange:function(e){return x(e.target.value)},style:{width:(t=O,.85*t.length-2/3+"em"),marginRight:"-0.05em"},children:[Object(j.jsx)("option",{value:"HOUR",children:"HOUR"}),Object(j.jsx)("option",{value:"DAY",children:"DAY"}),Object(j.jsx)("option",{value:"WEEK",children:"WEEK"}),Object(j.jsx)("option",{value:"MONTH",children:"MONTH"})]}),1===b?"":"s"]}),"."]})}),Object(j.jsxs)("div",{className:"control",children:[Object(j.jsx)("button",{className:"cancel",onClick:function(){return v.goBack()},children:Object(j.jsx)("img",{src:w,alt:"\u2717"})}),Object(j.jsx)("button",{className:"done",onClick:function(){S.createAddiction(e.name.trim().toUpperCase(),a/b,O.trim().toUpperCase()),e.onParentDone()},children:Object(j.jsx)("img",{src:R,alt:"\u2713"})})]})]})}n.p,n.p;var P=n.p+"static/media/add.0837f12a.svg";function F(e,t){return(.0124670262494863*Math.log(e)+.7442090627982052)*t}function W(e){return 5*Math.round(e/5)}var B={humanizeTime:function(e){if("number"!==typeof e)return"some time ago";var t=Math.round((new Date).getTime()/1e3-e);if(t<0)return"in the future";if(t<10)return"just now";var n=F(1,60);if(t<n){var c=W(t);return"about "+(c<=1?"a second":c+" seconds")+" ago"}if((t/=60)<(n=F(60,60))){var i=W(t);return"about "+(i<=1?"a minute":i+" minutes")+" ago"}if((t/=60)<(n=F(3600,24))){var a=Math.round(t);return"about "+(a<=1?"an hour":a+" hours")+" ago"}if((t/=24)<(n=F(86400,7))){var s=Math.round(t);return s<=1?"yesterday":"about "+s+" days ago"}var o=t/7;if(o<(n=F(604800,4))){var r=Math.round(o);return r<=1?"last week":"about "+r+" weeks ago"}if((t/=30)<(n=F(2592e3,12))){var l=Math.round(t);return l<=1?"last month":"about "+l+" months ago"}t/=12;var d=Math.round(t);return d<=1?"last year":"about "+d+" years ago"}};window.humanizeTime=B.humanizeTime;var H=B;var z=function(e){var t=Object(l.h)(),n=S.getAddiction(t.state.addictionID),c=0===n.timesUsed?1:n.timesUsed/n.timesAsked;console.log(n,c,n.acceptableRatio);var i=c<=n.acceptableRatio;return Object(j.jsxs)("div",{id:"viewer",children:[Object(j.jsxs)("div",{className:"header",children:[Object(j.jsx)("button",{className:"cancel",title:"Cancel",onClick:e.onCancel,children:Object(j.jsx)("img",{src:w,alt:"\u2717"})}),n.lastUsed&&Object(j.jsxs)("div",{className:"lasttime",children:["Last used ",H.humanizeTime(n.lastUsed)]})]}),Object(j.jsxs)("div",{className:"content",children:["You ",Object(j.jsx)("span",{style:{color:i?"#002300":"#490000"},children:i?"may":"should not"})," ",n.name,"."]}),Object(j.jsxs)("div",{className:"control",children:[Object(j.jsx)("div",{className:"header",children:"Please choose one to save progress."}),Object(j.jsxs)("div",{className:"buttons",children:[Object(j.jsxs)("button",{className:"no",onClick:function(){n.timesAsked+=1,n.timesUsed+=1,i||(n.timesRelapsed+=1),n.acceptableRatio=Math.max(n.acceptableRatio-n.decrementFactor,0),n.lastUsed=Math.floor((new Date).getTime()/1e3),S.saveData(),e.onCancel()},children:["I ",Object(j.jsx)("b",{children:"did"})," ",n.name]}),Object(j.jsxs)("button",{className:"yes",onClick:function(){n.timesAsked+=1,i&&(n.timesResisted+=1),n.lastUsed=Math.floor((new Date).getTime()/1e3),S.saveData(),e.onCancel()},children:["I ",Object(j.jsx)("b",{children:"did not"})," ",n.name]})]})]})]})},q=n.p+"static/media/copy.74285c11.svg",L=n.p+"static/media/whatsapp.3180c888.svg",V=n.p+"static/media/facebook.0ca03b77.svg",Y=n.p+"static/media/twitter.27d98fa0.svg",_=n.p+"static/media/reddit.0e964dac.svg",J=n.p+"static/media/share.968fb690.svg",K=location.origin+"/Deadiction";function G(e){navigator.clipboard.writeText(e).then(null,(function(){return alert("Not copied :(")}))}var Q=function(e){var t,n=Object(l.h)(),c=S.getAddiction(n.state.addictionID);return 0===c.timesAsked?t="I've not used Deadiction still, but I've a good feeling about this.\nI'm trying not to ".concat(c.name.toLowerCase(),"."):1===c.timesAsked?t="Just started using Deadiction, and I've a good feeling about this.\nI'm trying not to ".concat(c.name.toLowerCase()).concat(c.timesResisted?" and I've already started resisting":"","."):(t="I've used Deadiction ".concat(c.timesAsked," times trying to reduce how much I ").concat(c.name.toLowerCase(),"."),c.timesRelapsed?(t+="\n\nI did fail ".concat(c.timesRelapsed," time").concat(1===c.timesRelapsed?"":"s",", but I hope to improve."),c.timesResisted&&(t+="\nHopefully, I've been able to resist ".concat(c.timesResisted," time").concat(1===c.timesResisted?"":"s","."))):c.timesResisted&&(t+="\n\nI've already resisted ".concat(c.timesResisted," time").concat(1===c.timesResisted?"":"s","."))),Object(j.jsxs)("div",{id:"share",children:[Object(j.jsx)("button",{className:"cancel",title:"Cancel",onClick:e.onCancel,children:Object(j.jsx)("img",{src:w,alt:"\u2717"})}),Object(j.jsx)("h2",{children:"Share your story"}),Object(j.jsx)("div",{className:"content",children:t}),Object(j.jsxs)("div",{className:"control",children:[Object(j.jsx)("button",{title:"Copy text",onClick:function(){return G(t+"\n\n"+K)},children:Object(j.jsx)("img",{src:q,alt:"Copy"})}),Object(j.jsx)("button",{title:"Share on WhatsApp",onClick:function(){return open("https://wa.me?text=".concat(encodeURIComponent(t+"\n\n"+K)),"_blank")},children:Object(j.jsx)("img",{src:L,alt:"WhatsApp"})}),Object(j.jsx)("button",{title:"Share on Facebook",onClick:function(){G(t),alert("Text copied, paste and share."),setTimeout((function(){return open("https://www.facebook.com/sharer.php?u=".concat(K),"_blank")}),10)},children:Object(j.jsx)("img",{src:V,alt:"Facebook"})}),Object(j.jsx)("button",{title:"Share on Twitter",onClick:function(){return open("http://twitter.com/share?text=".concat(encodeURIComponent(t),"&url=").concat(K,"&hashtags=deadiction"),"_blank")},children:Object(j.jsx)("img",{src:Y,alt:"Twitter"})}),Object(j.jsx)("button",{title:"Share on Reddit",onClick:function(){return open("https://www.reddit.com/submit?title=Deadiction&text=".concat(encodeURIComponent(t+"\n\n"+K)),"_blank")},children:Object(j.jsx)("img",{src:_,alt:"Reddit"})}),Object(j.jsx)("button",{title:"Share anywhere",onClick:function(){navigator.share&&navigator.share({title:"Deadiction",text:t,url:K}).catch(console.error)},children:Object(j.jsx)("img",{src:J,alt:"Anywhere"})})]})]})};var X=function(){var e=S.loadData(),t=i.a.useState(!1),n=Object(r.a)(t,2),c=n[0],a=n[1],s=i.a.useState(null),o=Object(r.a)(s,2),d=o[0],b=o[1],u=Object(l.g)();return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)(l.d,{children:[Object(j.jsx)(l.b,{path:"/create",children:Object(j.jsx)(T,{onDone:function(){return u.replace("/list")}})}),Object(j.jsxs)(l.b,{path:"/list",children:[Object(j.jsx)(Z,{onCreate:function(){return u.push("/create")},onItemSelect:function(e){return u.push("/view",{addictionID:e})},onViewProgress:function(e){return u.push("/progress",{addictionID:e})},onDelete:function(e){b(e),a(!0)}}),c&&Object(j.jsx)(y,{onClose:function(){return a(!1)},children:Object(j.jsxs)(C,{title:"Delete",controls:{"Yes, I am sure!":function(){S.removeAddiction(d),a(!1)},"Nooo...":function(){return a(!1)}},children:["Are you sure you want to delete ",Object(j.jsx)("b",{children:S.getAddiction(d).name}),"?",Object(j.jsx)("br",{}),"Are you sure you won't ",Object(j.jsx)("b",{children:S.getAddiction(d).name})," again?"]})})]}),Object(j.jsx)(l.b,{path:"/view",children:Object(j.jsx)(z,{onCancel:u.goBack})}),Object(j.jsx)(l.b,{path:"/progress",children:Object(j.jsx)(Q,{onCancel:u.goBack})}),Object(j.jsx)(l.b,{path:"/",children:0===e.addictions.length?Object(j.jsx)(l.a,{to:"/create"}):Object(j.jsx)(l.a,{to:"/list"})})]})})};function Z(e){var t=S.loadData();return 0===t.addictions.length?Object(j.jsx)(l.a,{to:"/create"}):Object(j.jsxs)("div",{id:"lister",children:[Object(j.jsx)("div",{className:"header",children:Object(j.jsx)("button",{className:"add",title:"Create new",onClick:function(){return e.onCreate()},children:Object(j.jsx)("img",{src:P,alt:"+"})})}),Object(j.jsx)("div",{className:"instruction",children:"Choose what you're thinking to do."}),Object(j.jsx)(p,{children:t.addictions.map((function(t){return Object(j.jsxs)(f,{onClick:function(){return e.onItemSelect(t.id)},onViewProgress:function(){return e.onViewProgress(t.id)},onDelete:function(){return e.onDelete(t.id)},children:["Should I ",Object(j.jsx)("b",{children:t.name}),"?"]},t.id)}))})]})}var $=n(23),ee=n.p+"static/media/rarrow.ea32db54.svg",te=["children","onEnd"];function ne(e){var t=e.children,n=e.onEnd,a=(Object(u.a)(e,te),t.length),s=Object(c.useState)(0),o=Object(r.a)(s,2),l=o[0],d=o[1],b=i.a.cloneElement(t[l],{key:l,onNext:l===a-1?n:function(){d(l+1)}});return Object(j.jsx)("div",{className:"card-view",children:b})}function ce(e){var t=Object(c.useState)("enter"),n=Object(r.a)(t,2),i=n[0],a=n[1];return Object(j.jsxs)("div",{className:"card ".concat(i),style:Object($.a)({},e.style),children:[Object(j.jsx)("div",{className:"content",children:e.children}),Object(j.jsx)("button",{title:"Next",onClick:function(){a("exit"),setTimeout(e.onNext,1e3)},children:Object(j.jsx)("img",{src:ee,alt:">"})})]})}var ie=function(e){return Object(j.jsxs)(ne,{onEnd:e.onEnd,children:[Object(j.jsxs)(ce,{style:{textAlign:"center"},children:["Dealing with ",Object(j.jsx)("u",{children:"addiction"})," can be hard."]}),Object(j.jsx)(ce,{children:"Maybe rehab doesn't exist for your kind of addiction. Or maybe you just don't wanna go because you're worried that people will know."}),Object(j.jsxs)(ce,{children:["But, do you have the ",Object(j.jsx)("i",{children:"dedication"})," to quit your addiction by yourself?",Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),"If the answer is ",Object(j.jsx)("b",{children:"yes"}),", this simple web app might be able to help.",Object(j.jsx)("br",{}),"This takes a different approach to the problem."]}),Object(j.jsxs)(ce,{children:["How do people get ",Object(j.jsx)("u",{children:"addicted"}),"?",Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),"We start with something ",Object(j.jsx)("small",{children:"small"}),", like an experiment. We like it and try to do a little more, thinking that we're in control.",Object(j.jsx)("br",{}),"And soon it goes ",Object(j.jsx)("big",{children:"out of control."})]}),Object(j.jsxs)(ce,{children:[Object(j.jsx)("b",{children:"This"})," tries to take this backward. Initially, you are allowed to continue with your bad habits with small gaps in between. Gradually the gaps are increased.",Object(j.jsx)("br",{}),"When you've not done the ",Object(j.jsx)("u",{children:"bad habit"})," for some time, it incentivizes you by allowing you to do the ",Object(j.jsx)("u",{children:"bad habit"}),"."]}),Object(j.jsx)(ce,{children:"It teaches you coping skills that might work for you, but more importantly, it motivates you. This helps keep you focused on quitting and helps motivate you to try to change."}),Object(j.jsx)(ce,{children:Object(j.jsxs)("div",{style:{fontSize:"0.6em"},children:["If you don't have self-determination, or you relapse with the incentives, that will be a problem. But the idea behind this approach is that you've enough ",Object(j.jsx)("i",{children:"dedication"})," to stop your ",Object(j.jsx)("u",{children:"addiction"}),", with ",Object(j.jsx)("b",{children:"Deadiction"})," acting as a motivator.",Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),"This is an offline app. All your data is stored in ",Object(j.jsx)("a",{href:"https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage",children:"local storage"}),".",Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)("span",{style:{fontFamily:"serif"},children:"Some addictions might need professional help. If so be the need, don't hesitate to reach out."}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),"And lastly, if this approach, this app, helped you, do share your experience."]})})]})};var ae=function(){var e=S.loadData(),t=Object(c.useState)(e.firstTime),n=Object(r.a)(t,2),i=n[0],a=n[1],s=Object(l.g)();return Object(j.jsx)(b,{title:"Deadiction",children:Object(j.jsxs)(l.d,{children:[Object(j.jsx)(l.b,{path:"/intro",children:Object(j.jsx)(ie,{onEnd:function(){a(!1),e.firstTime=!1,S.saveData(),s.replace("/")}})}),Object(j.jsx)(l.b,{path:"/",children:i?Object(j.jsx)(l.a,{to:"/intro"}):Object(j.jsx)(X,{})})]})})};n(34);s.a.render(Object(j.jsx)(o.a,{basename:"/Deadiction",children:Object(j.jsx)(ae,{})}),document.getElementById("root"))}},[[35,1,2]]]);